<html>
    <script src='https://d3js.org/d3.v5.min.js'></script>
    <style>circle {fill: red; stroke: black; r: 5}</style>
    <body onload=init()>
        <svg width=1000 height=1000 ></svg>
        <script>
            async function init() {
                homeruns = await loadData()
                svg = d3.select("svg");
                width = 700;
                height = 700;
                margin = 150;

                yearScale = d3.scaleTime().domain(d3.extent(homeruns, d => d.Year)).range([0, width])
                homerunScale = d3.scaleLinear().domain(d3.extent(homeruns, d => d.Total)).range([height, 0])
                
                // draw scatter plot
                svg.append("g")
                    .attr("transform", "translate(" + margin + "," + margin + ")")
                    .selectAll("circle")
                    .data(homeruns)
                    .enter()
                    .append("circle")
                    .attr("cx", (d,i) => yearScale(d.Year))
                    .attr("cy", (d,i) => homerunScale(d.Total));

                // create y axis
                svg.append("g")
                    .attr("transform", "translate(" + margin +"," + margin +")")
                    .call(d3.axisLeft(homerunScale));


                // create x axis
                svg.append("g")
                    .attr("transform", "translate(" + margin +"," + (height + margin) +")")
                    .call(d3.axisBottom(yearScale));
            }

            async function loadData() {
                return await d3.csv("https://raw.githubusercontent.com/chrisfisch914/CS416-Project2/master/homeruns.csv",
                    function (d) {
                        return {
                            Year: d3.timeParse("%Y")(d.Year),
                            Total: parseInt(d.Total)
                        }
                    }
                );
            }
        </script>
    </body>
</html>